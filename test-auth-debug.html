
<!DOCTYPE html>
<html>
<head>
    <title>Auth Debug</title>
</head>
<body>
    <h1>Internal Chat API Debug</h1>
    <div id="results"></div>
    
    <script>
    async function testEndpoints() {
        const results = document.getElementById('results');
        
        const tests = [
            { name: 'Auth Check', url: '/api/auth/user' },
            { name: 'Agents List', url: '/api/agent-chatbots' },
            { name: 'Sessions (no agent)', url: '/api/internal-chat/sessions' },
            { name: 'Sessions (agent 26)', url: '/api/internal-chat/sessions/26' }
        ];
        
        for (const test of tests) {
            try {
                const response = await fetch(test.url);
                const data = await response.json();
                
                results.innerHTML += `
                    <h3>${test.name}</h3>
                    <p>Status: ${response.status}</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                    <hr>
                `;
            } catch (error) {
                results.innerHTML += `
                    <h3>${test.name} - ERROR</h3>
                    <p>Error: ${error.message}</p>
                    <hr>
                `;
            }
        }
    }
    
    testEndpoints();
    </script>
</body>
</html>
