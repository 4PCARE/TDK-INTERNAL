 Starting SQLite Service Tests
================================
📁 Created test directory

📊 Creating sample Excel file...
✅ Sample Excel file created

🔍 Testing Excel validation...
✅ Excel validation passed
📋 Found 2 sheets:
  - Employees: 5 rows, 4 columns
    Headers: Yes
    Columns: Name, Age, Department, Salary
  - Projects: 4 rows, 3 columns
    Headers: Yes
    Columns: Project, Status, Budget

🗄️ Testing SQLite database creation...
✅ SQLite database created successfully
📁 File path: /home/runner/workspace/uploads/Test_Database_1756450514313.db
🔢 Connection ID: 18
✅ Database file exists
Oracle DB driver not available

🔌 Testing database connection...
Test connection object: {
  "id": 999,
  "userId": "test-user-123",
  "name": "Test Database",
  "type": "database",
  "dbType": "sqlite",
  "filePath": "/home/runner/workspace/uploads/Test_Database_1756450514313.db",
  "isActive": true,
  "createdAt": "2025-08-29T06:55:16.193Z",
  "updatedAt": "2025-08-29T06:55:16.193Z"
}
SQLite connection test error: ReferenceError: require is not defined
    at DatabaseConnector.testSQLiteConnection (/home/runner/workspace/server/services/databaseConnector.ts:168:18)
    at DatabaseConnector.testDatabaseConnection (/home/runner/workspace/server/services/databaseConnector.ts:96:29)
    at DatabaseConnector.testConnection (/home/runner/workspace/server/services/databaseConnector.ts:49:31)
    at testSQLiteCreation (/home/runner/workspace/server/test-sqlite-service.ts:153:52)
    at async runAllTests (/home/runner/workspace/server/test-sqlite-service.ts:25:5)
Connection test result: {
  "success": false,
  "message": "SQLite connection failed: require is not defined"
}
❌ Test suite failed: Error: Database connection test failed: SQLite connection failed: require is not defined
    at testSQLiteCreation (/home/runner/workspace/server/test-sqlite-service.ts:161:13)
    at async runAllTests (/home/runner/workspace/server/test-sqlite-service.ts:25:5)

🧹 Cleaning up test files...
🗑️ Removed Test_Database_1756450514313.db
✅ Cleanup completed
Error: Database connection test failed: SQLite connection failed: require is not defined
    at testSQLiteCreation (/home/runner/workspace/server/test-sqlite-service.ts:161:13)
    at async runAllTests (/home/runner/workspace/server/test-sqlite-service.ts:25:5)